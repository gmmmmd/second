"use strict";function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,e,o,r,i,c,l,a,d,u,f,p,m,y,v,S,h,g,_,b=document.querySelector(".overlay"),q="https://academy.directlinedev.com",L=(document.querySelector(".preloader"),document.forms.registerForm),w=document.forms.signInForm,j=document.forms.sendMessageForm,E=L.elements.required,k=j.elements.required,I=L.querySelector(".button-reg-js"),T=(w.querySelector(".button-signIn-js"),j.querySelector(".button-sendMessage-js"));function x(t){t.preventDefault(),J(f);var e=C(j),e={to:e.email,body:JSON.stringify(e)};D({method:"POST",url:"/api/emails",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){if(e.ok)return e.json();throw new Error("Что-то пошло не так")}).then(function(e){alert("Вы успешно отправили письмо!"),P(d),M(f)}).catch(function(e){alert(e),t.target.reset(),M(f)})}function O(e){y.style.transition="transform .4s",y.style.transform="translate(".concat(-h*_,"px)"),localStorage.setItem("activeSlide",e)}function A(e){var t=document.querySelector(".slider__dot_active");t&&t.classList.remove("slider__dot_active"),v.children[e].classList.add("slider__dot_active"),localStorage.setItem("activeSlide",e)}N(),r=document.querySelector(".button_sign-js"),t=document.querySelector(".popup_sign"),c=document.querySelector(".popup_close_sign-js"),e=t.querySelector("input"),o=t.querySelector(".signIn-preloader-js"),r.addEventListener("click",function(){M(o),P(t),e.focus()}),c.addEventListener("click",function(){P(t)}),w.addEventListener("submit",function(e){(e=e).preventDefault(),J(o),e=C(w),D({method:"POST",url:"/api/users/login",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){if(e.ok)return e.json();throw new Error("Что-то пошло не так")}).then(function(e){localStorage.setItem("userId",e.data.userId),localStorage.setItem("token",e.data.token),N(),P(t),setTimeout(function(){M(o),location.pathname="/project/pages/profile/index.html"},2e3)}).catch(function(e){alert(e),M(o)})}),r=document.querySelector(".button_register-js"),i=document.querySelector(".popup_register"),c=document.querySelector(".popup_close_register-js"),l=i.querySelector("input"),a=i.querySelector(".register-preloader-js"),r.addEventListener("click",function(){M(a),P(i),l.focus()}),c.addEventListener("click",function(){P(i)}),F(I,E),L.addEventListener("submit",function(e){!function(t){t.preventDefault(),J(a);var e=C(L);D({method:"POST",url:"/api/users",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=utf-8"}}).then(function(e){if(e.ok)return e.json();throw new Error("Что-то пошло не так")}).then(function(e){alert("Вы успешно зарегистрировались! Ваш id: ".concat(e.data.id)),P(i),M(a)}).catch(function(e){alert(e),t.target.reset(),M(a)})}(e)}),I=document.querySelector(".button_send-js"),d=document.querySelector(".popup_send"),E=document.querySelector(".popup_close_send-js"),u=d.querySelector("input"),f=d.querySelector(".sendMessage-preloader-js"),I.addEventListener("click",function(){M(f),P(d),u.focus()}),E.addEventListener("click",function(){P(d)}),F(T,k),j.addEventListener("submit",function(e){x(e)}),window.addEventListener("keydown",function(){z(popupFormSign),z(popupFormRegister),z(popupFormSend)}),(p=document.querySelector(".button-scroll_js"))&&(p.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),window.addEventListener("scroll",function(){1500<window.pageYOffset?p.classList.remove("buttonToTop_hidden"):p.classList.add("buttonToTop_hidden")})),m=(E=document.querySelector(".slider-js")).querySelector(".slider__wrapper"),y=E.querySelector(".slider__container"),v=E.querySelector(".slider__pagination"),T=E.querySelector(".slider__button_left"),k=E.querySelector(".slider__button_right"),S=E.querySelectorAll(".slider_slide"),h=+getComputedStyle(m).width.split("px")[0],g=y.childElementCount-1,_=0,localStorage.getItem("activeSlide",0),localStorage.getItem("activeSlide")?O(_=+localStorage.getItem("activeSlide")):O(_),function(){for(var e=0;e<y.children.length;e++)!function(e){var t=document.createElement("button");t.classList.add("slider__dot"),e===_&&t.classList.add("slider__dot_active"),t.addEventListener("click",function(){_=e,O(),A(_)}),v.append(t)}(e)}(),k.addEventListener("click",function(){_<g&&(_+=1,O(),A(_))}),T.addEventListener("click",function(){0<_&&(--_,O(),A(_))}),window.addEventListener("resize",function(){h=+getComputedStyle(m).width.split("px")[0],function(){var e,t=n(S);try{for(t.s();!(e=t.n()).done;)slide=e.value,slide.style.width="".concat(h,"px")}catch(e){t.e(e)}finally{t.f()}}(),0<_&&(O(),y.style.transform="translate(".concat(-h*_,"px)"))});new Swiper(".swiper",{direction:"horizontal",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});function C(e){var e=new FormData(e),n={};return e.forEach(function(e,t){n[t]=e}),console.log(n),n}function F(e,t){e.disabled=!0,t.addEventListener("change",function(){t.checked?e.disabled=!1:e.disabled=!0})}function D(e){var t=e.url,n=e.method,o=e.body,e=e.headers;return fetch(q+t,{headers:e,method:n,body:o})}function J(e){e.style.display="flex"}function M(e){e.style.display="flex",e.style.display="none"}function N(){var e=localStorage.getItem("token"),t=document.querySelector(".signIn-js"),n=document.querySelector(".register-js"),o=document.querySelector(".toProfile-js");e?(t.classList.add("common-hidden"),n.classList.add("common-hidden"),o.classList.remove("common-hidden")):(t.classList.remove("common-hidden"),n.classList.remove("common-hidden"),o.classList.add("common-hidden"))}function P(e){e.classList.toggle("popup_open"),b.classList.toggle("overlay_open")}function z(e){"Escape"===event.key&&(e.classList.remove("popup_open"),b.classList.remove("overlay_open"))}